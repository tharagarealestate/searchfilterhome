<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Tharaga â€” Home Search</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --brand:#6e0d25;
      --brand-2:#8c1630;
      --cream:#f7efe7;
      --ink:#1b1b1b;
      --muted:#6b7280;
      --ring:rgba(110,13,37,.25);
    }

    *{box-sizing:border-box}
    html,body{
      margin:0;
      padding:0;
      background:var(--cream);
      color:var(--ink);
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    }

    .input, select{
      width:100%;
      padding:10px 12px;
      font-size:14px;
      background:#fff;
      border:1px solid #e5e7eb;
      border-radius:10px;
      outline:0;
      transition:.15s ease-in-out;
    }
    .input:hover, select:hover{
      border-color:var(--brand);
      background:#fffafa;
      box-shadow:0 2px 6px rgba(110,13,37,.06);
    }
    .input:focus, select:focus{
      border-color:var(--brand);
      box-shadow:0 0 0 3px var(--ring);
    }

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      font-weight:700;
      letter-spacing:.01em;
      background:var(--brand);
      color:#fff;
      border:1px solid var(--brand);
      border-radius:10px;
      cursor:pointer;
      padding:10px 20px;
      transition:.15s ease-in-out;
      white-space:nowrap;
    }
    .btn:hover{ filter:brightness(1.03) }
    .btn:active{ transform:translateY(1px) }

    .home-shell{ padding:12px 16px; }
    .home-search-container{
      max-width:900px;
      margin:12px auto 10px;
      background:linear-gradient(180deg,#fff,#fdf9f7);
      border:1px solid #f0d9d9;
      border-radius:16px;
      padding:10px;
      box-shadow:0 4px 24px rgba(110,13,37,.16);
      transition:transform .2s ease, box-shadow .2s ease;
    }
    .home-search-container:hover{
      transform:translateY(-2px);
      box-shadow:0 16px 36px rgba(110,13,37,.16);
    }
    .home-search-container:focus-within{
      box-shadow:0 0 0 3px var(--ring), 0 16px 36px rgba(110,13,37,.16);
    }

    /* Pill Row */
    .pill-row {
      display: flex;
      gap: 8px;
      margin-bottom: 10px;
    }
    .filter-pill {
      flex: 1;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--brand);
      background: #fff;
      color: var(--brand);
      font-weight: 600;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .filter-pill.active {
      background: var(--brand);
      color: #fff;
    }
    .filter-pill:hover {
      background: var(--brand-2);
      color: #fff;
    }

    .home-search-row{
      display:grid;
      grid-template-columns:180px 1fr 118px;
      align-items:stretch;
      gap:0;
    }
    .home-seg{ border-radius:0 }
    .home-seg--left{ border-top-left-radius:10px; border-bottom-left-radius:10px }
    .home-seg--right{ border-top-right-radius:10px; border-bottom-right-radius:10px }
    .home-input{ border-left:none; border-right:none }

    .home-input-wrap{ position:relative }
    .home-icon{
      position:absolute;
      left:12px; top:50%;
      transform:translateY(-50%);
      color:var(--muted);
      pointer-events:none;
    }
    .home-input{ padding-left:36px }

    @media (max-width:640px){
      .home-search-row{ grid-template-columns:1fr; gap:8px }
      .home-input{ border-left:1px solid #e5e7eb; border-right:1px solid #e5e7eb }
      .home-seg,
      .home-seg--left,
      .home-seg--right{ border-radius:10px }
    }
  </style>
</head>
<body>

  <main class="home-shell">
    <section class="home-search-container" aria-label="Property quick search">
      
      <!-- NEW Pill Row -->
      <div class="pill-row">
        <button class="filter-pill active" data-type="buy">Buy</button>
        <button class="filter-pill" data-type="rent">Rent</button>
        <button class="filter-pill" data-type="commercial">Commercial</button>
      </div>

      <div class="home-search-row">
        <select id="homeCity" class="home-seg home-seg--left" aria-label="Select city">
          <option value="" selected disabled>Select City</option>
          <option>Chennai</option>
          <option>Coimbatore</option>
          <option>Madurai</option>
        </select>

        <div class="home-input-wrap">
          <svg class="home-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M21 21l-4.35-4.35M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"
                  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <input id="homeQuery" class="input home-input" placeholder="Search up to 3 localities or landmarks" aria-label="Locality search">
        </div>

        <button id="homeSearchBtn" class="btn home-seg home-seg--right" type="button">
          <span>Search</span>
        </button>
      </div>
    </section>
  </main>

  <script>
    (function(){
      const LISTINGS_URL = "https://tharaga.co.in/verified-property-listings";
      let selectedType = "buy"; // default

      // Handle pill clicks
      document.querySelectorAll('.filter-pill').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.filter-pill').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          selectedType = btn.dataset.type;
        });
      });

      const cityEl  = document.getElementById('homeCity');
      const qEl     = document.getElementById('homeQuery');
      const btnEl   = document.getElementById('homeSearchBtn');

      function go(){
        const city = (cityEl.value || "").trim();
        const q    = (qEl.value || "").trim();

        const params = new URLSearchParams();
        if (selectedType) params.set('type', selectedType);
        if (city) params.set('city', city);
        if (q)    params.set('q', q);

        const sep = LISTINGS_URL.includes('?') ? '&' : '?';
        window.location.href = LISTINGS_URL + (params.toString() ? (sep + params.toString()) : "");
      }

      btnEl.addEventListener('click', go);
      qEl.addEventListener('keydown', (e)=>{ if(e.key === 'Enter'){ e.preventDefault(); go(); } });

      const savedCity = sessionStorage.getItem('tharaga_home_city');
      if (savedCity) cityEl.value = savedCity;
      cityEl.addEventListener('change', ()=> sessionStorage.setItem('tharaga_home_city', cityEl.value));
    })();
  </script>
</body>
</html>
